{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://tka.dev/schemas/beat-data.json",
  "title": "BeatData v2",
  "description": "Pure business data for a single beat based on modern desktop domain model",
  "type": "object",
  "properties": {
    "beatNumber": {
      "type": "integer",
      "minimum": 0,
      "description": "Position in sequence (0 for start position, 1+ for regular beats)"
    },
    "letter": {
      "anyOf": [{ "type": "string" }, { "type": "null" }],
      "description": "TKA letter for this beat"
    },
    "duration": {
      "type": "number",
      "exclusiveMinimum": 0,
      "default": 1.0,
      "description": "Duration of this beat in time units"
    },
    "blueMotion": {
      "anyOf": [{ "$ref": "motion-data.json" }, { "type": "null" }],
      "description": "Blue motion data"
    },
    "redMotion": {
      "anyOf": [{ "$ref": "motion-data.json" }, { "type": "null" }],
      "description": "Red motion data"
    },
    "pictographData": {
      "anyOf": [{ "type": "object" }, { "type": "null" }],
      "description": "Pictograph rendering data"
    },
    "glyphData": {
      "anyOf": [{ "type": "object" }, { "type": "null" }],
      "description": "Glyph rendering data"
    },
    "blueReversal": {
      "type": "boolean",
      "default": false,
      "description": "Whether blue motion is reversed"
    },
    "redReversal": {
      "type": "boolean",
      "default": false,
      "description": "Whether red motion is reversed"
    },
    "filled": {
      "type": "boolean",
      "default": false,
      "description": "Whether this beat is filled/complete"
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" },
      "default": [],
      "description": "Tags associated with this beat"
    },
    "metadata": {
      "anyOf": [{ "type": "object" }, { "type": "null" }],
      "description": "Additional metadata for this beat",
      "additionalProperties": true,
      "properties": {
        "is_start_position": {
          "type": "boolean",
          "default": false,
          "description": "Whether this beat represents a start position"
        }
      }
    }
  },
  "required": ["beatNumber", "letter", "blueMotion", "redMotion"],
  "additionalProperties": false
}
