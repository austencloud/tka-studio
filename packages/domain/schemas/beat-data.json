{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://tka.dev/schemas/beat-data.json",
  "title": "BeatData",
  "description": "Pure business data for a single beat in a TKA sequence. No UI dependencies, completely immutable.",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for this beat"
    },
    "beat_number": {
      "type": "integer",
      "minimum": 0,
      "description": "Position of this beat in the sequence (0 for start position)"
    },
    "pictograph_data": {
      "anyOf": [{ "$ref": "./pictograph-data.json" }, { "type": "null" }],
      "description": "Complete pictograph data for this beat"
    },
    "filled": {
      "type": "boolean",
      "default": false,
      "description": "Whether this beat has been filled with data"
    },
    "letter": {
      "type": ["string", "null"],
      "enum": [
        null,
        "A",
        "B",
        "C",
        "D",
        "E",
        "F",
        "G",
        "H",
        "I",
        "J",
        "K",
        "L",
        "M",
        "N",
        "O",
        "P",
        "Q",
        "R",
        "S",
        "T",
        "U",
        "V",
        "W",
        "X",
        "Y",
        "Z",
        "Σ",
        "Δ",
        "θ",
        "Ω",
        "W-",
        "X-",
        "Y-",
        "Z-",
        "Σ-",
        "Δ-",
        "θ-",
        "Ω-",
        "Φ",
        "Ψ",
        "Λ",
        "Φ-",
        "Ψ-",
        "Λ-",
        "α",
        "β",
        "Γ"
      ],
      "description": "TKA letter for this beat (convenience field, also in pictograph_data)"
    },
    "duration": {
      "type": "number",
      "minimum": 0,
      "default": 1.0,
      "description": "Duration of this beat in time units"
    },
    "blue_motion": {
      "anyOf": [{ "$ref": "motion-data.json" }, { "type": "null" }],
      "description": "Motion data for blue prop/arrow"
    },
    "red_motion": {
      "anyOf": [{ "$ref": "motion-data.json" }, { "type": "null" }],
      "description": "Motion data for red prop/arrow"
    },
    "blue_reversal": {
      "type": "boolean",
      "default": false,
      "description": "Whether blue motion is reversed"
    },
    "red_reversal": {
      "type": "boolean",
      "default": false,
      "description": "Whether red motion is reversed"
    },
    "is_blank": {
      "type": "boolean",
      "default": false,
      "description": "Whether this is a blank/empty beat"
    },
    "start_position": {
      "type": ["string", "null"],
      "enum": [
        null,
        "alpha1",
        "alpha2",
        "alpha3",
        "alpha4",
        "alpha5",
        "alpha6",
        "alpha7",
        "alpha8",
        "beta1",
        "beta2",
        "beta3",
        "beta4",
        "beta5",
        "beta6",
        "beta7",
        "beta8",
        "gamma1",
        "gamma2",
        "gamma3",
        "gamma4",
        "gamma5",
        "gamma6",
        "gamma7",
        "gamma8",
        "gamma9",
        "gamma10",
        "gamma11",
        "gamma12",
        "gamma13",
        "gamma14",
        "gamma15",
        "gamma16"
      ],
      "description": "Start position for this beat (convenience field)"
    },
    "end_position": {
      "type": ["string", "null"],
      "enum": [
        null,
        "alpha1",
        "alpha2",
        "alpha3",
        "alpha4",
        "alpha5",
        "alpha6",
        "alpha7",
        "alpha8",
        "beta1",
        "beta2",
        "beta3",
        "beta4",
        "beta5",
        "beta6",
        "beta7",
        "beta8",
        "gamma1",
        "gamma2",
        "gamma3",
        "gamma4",
        "gamma5",
        "gamma6",
        "gamma7",
        "gamma8",
        "gamma9",
        "gamma10",
        "gamma11",
        "gamma12",
        "gamma13",
        "gamma14",
        "gamma15",
        "gamma16"
      ],
      "description": "End position for this beat (convenience field)"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [],
      "description": "Tags for categorizing or searching beats"
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata for this beat",
      "additionalProperties": true
    }
  },
  "required": ["id", "beat_number", "filled"],
  "additionalProperties": false
}
