"""
Modern Desktop Tests Configuration
================================

This conftest.py ensures that all tests in the modern desktop codebase
can import modules correctly.
"""

import sys
import os
from pathlib import Path

# Add the modern src directory to Python path
current_dir = Path(__file__).parent
modern_root = current_dir.parent  # src/desktop/modern/
modern_src = modern_root / "src"
tka_root = modern_root.parent.parent.parent  # TKA/

# Add essential paths
paths_to_add = [
    str(modern_src),  # For domain, core, application, etc.
    str(modern_root),  # For tests
    str(tka_root),  # For project_root
]

for path in paths_to_add:
    if path not in sys.path:
        sys.path.insert(0, path)

# Set up project root
try:
    from project_root import ensure_project_setup
    ensure_project_setup()
except ImportError:
    print(f"Warning: Could not import project_root from {tka_root}")

import pytest

@pytest.fixture(scope="session")
def modern_src_path():
    """Provide the modern src path."""
    return modern_src

@pytest.fixture(scope="session") 
def modern_root_path():
    """Provide the modern root path."""
    return modern_root
