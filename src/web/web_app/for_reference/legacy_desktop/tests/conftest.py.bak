"""
Legacy Desktop Tests Configuration
================================

This conftest.py ensures that all tests in the legacy desktop codebase
can import modules correctly.
"""

import sys
import os
from pathlib import Path

# Add the legacy src directory to Python path
current_dir = Path(__file__).parent
legacy_root = current_dir.parent  # src/desktop/legacy/
legacy_src = legacy_root / "src"
tka_root = legacy_root.parent.parent.parent  # TKA/

# Add essential paths
paths_to_add = [
    str(legacy_src),  # For legacy modules
    str(legacy_root),  # For tests
    str(tka_root),  # For project_root
]

for path in paths_to_add:
    if path not in sys.path:
        sys.path.insert(0, path)

# Set up project root
try:
    from project_root import ensure_project_setup
    ensure_project_setup()
except ImportError:
    print(f"Warning: Could not import project_root from {tka_root}")

import pytest

@pytest.fixture(scope="session")
def legacy_src_path():
    """Provide the legacy src path."""
    return legacy_src

@pytest.fixture(scope="session")
def legacy_root_path():
    """Provide the legacy root path."""
    return legacy_root
